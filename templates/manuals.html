{% extends "base.html" %}
{% block content %}
<div class="container mx-auto px-4 py-6">
  <h2 class="text-lg font-semibold mb-4">메뉴얼</h2>

  <div class="grid grid-cols-12 gap-4">
    <!-- 좌측 패널 -->
    <aside class="col-span-12 lg:col-span-3">
      <div class="bg-white rounded shadow p-3 space-y-4">
        <!-- 버전 선택 -->
        <div>
          <label for="ver-select" class="block text-sm text-gray-600 mb-1">버전</label>
          <select id="ver-select" class="w-full border rounded px-2 py-1">
            {% for v in versions %}
              <option value="{{ v.name }}">{{ v.name }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- 소프트웨어 목록 -->
        <div>
          <div class="text-sm text-gray-600 mb-2">SW</div>
          <div id="sw-list" class="grid grid-cols-1 gap-2">
            {% for s in software %}
            <button
              type="button"
              class="sw-btn w-full rounded-xl px-4 py-3 text-left bg-slate-50 hover:bg-slate-100 border border-slate-200 shadow-sm"
              data-sw="{{ s.name }}">
              <span class="font-semibold">{{ s.name }}</span>
            </button>
            {% endfor %}
          </div>
        </div>
      </div>
    </aside>

    <!-- 우측 뷰어 -->
    <section class="col-span-12 lg:col-span-9">
      <!-- 상단 바 -->
      <div class="flex items-center gap-3 mb-3">
        <button id="pdfBtn"
                type="button"
                class="bg-blue-600 text-white text-sm rounded px-3 py-2 disabled:opacity-50 disabled:cursor-not-allowed"
                disabled>
          PDF 내보내기
        </button>
        <span id="current-label" class="text-gray-500 text-sm"></span>
      </div>

      <!-- 뷰 영역 -->
      <div class="bg-white rounded shadow overflow-hidden" style="height: calc(100vh - 220px);">
        <!-- 초기 플레이스홀더 -->
        <div id="placeholder"
             class="w-full h-full flex items-center justify-center text-gray-400 select-none">
          <div class="text-center">
            <div class="text-2xl mb-2">왼쪽에서 버전과 SW를 선택하면 내용이 표시됩니다</div>
            <div class="text-sm">RMD → HTML 로 변환된 <code>index.html</code>을 불러옵니다.</div>
          </div>
        </div>

        <!-- 실제 뷰어 -->
        <div id="viewerWrap" style="display:none; width:100%; height:100%;">
          <iframe id="manualFrame" title="Manual Viewer"
                  style="width:100%; height:100%; border:0;"
                  referrerpolicy="no-referrer"></iframe>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- 페이지 전용 스크립트 -->
<script src="/static/manuals.js?v=2"></script>
{% endblock %}
